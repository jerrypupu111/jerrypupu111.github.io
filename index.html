<html>
<head>
	<title>ONE TAIWAN 產生器</title>
	<meta charset='utf-8'>
	<link rel="stylesheet" href="index.css" />
	<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script src = 'js/script.js'></script>
	<script src = 'js/font.js'></script>
	<script src = "js/image.js"></script>
 	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-69645811-1', 'auto');
	  ga('send', 'pageview');

	</script>
</head>
<body>
<table>
<tr>
<td>
<img class="title" src="title.png" alt="">
</td>
<td>
<div class="fb-page" data-href="https://www.facebook.com/onetaiwangen/" data-height="400"  data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true" data-show-posts="true"><div class="fb-xfbml-parse-ignore"><blockquote cite="https://www.facebook.com/onetaiwangen/"><a href="https://www.facebook.com/onetaiwangen/">ONE Taiwan 產生器</a></blockquote></div></div>
</td>
</tr>
</table>

<header>

<p>注意!! 目前還無法使用FB分享功能!!</p>
<p>點擊產生圖案後跳出頁面，在圖片按下右鍵，點選另存圖片或複製圖片即可貼在FB塗鴉牆上</p>
</header>


<div class="fb-login-button" data-max-rows="1" data-size="xlarge" data-show-faces="false" data-auto-logout-link="false" onlogin = "checklogin()">FB登入</div>

<div class="main">

	<div class="side-bar">
		
		<p><label for="top-text">上標題</label><input id='top-text' class='top-text' type="text" value ='文字'></p>
		<p><label for="main-text">主標題</label><input id='main-text' class='main-text' type="text" value ='ONE'></p>

		<div class="bottom-area">
			<label for="">下標1</label><input id='bottom-text1' class='bottom-text' type="text" value='文字'>
			<select class="font-size">
				<option value="40">小</option>
				<option value="80" selected>中</option>
				<option value="150">大</option>
			</select>
		</div>

		<button id="new" >新增下標</button>
		<button id="gen-btn" >產生圖案</button><br>

		<div class="auth">
		<p></p>
		<textarea name="" placeholder="在想些什麼?" id="message_area" cols="30" rows="10">#ONETAIWAN</textarea>
		<button id="share-btn" >分享至FaceBook活動頁面</button><br>
		</div>


		<div class="image-area">
			<input type='file' onchange="readURL(this);" />
		</div>
	</div>

	<div class="canvas-area">
		<canvas id="canvas" width="1000" height="1000"></canvas>
	</div>



</div>


<div class="hidden">
	<div class="bottom-text-template">
		<label for="bottom-text">下標</label><input class='bottom-text' type="text" value='文字'>
		<select class="font-size">
			<option value="40">小</option>
			<option value="80" selected>中</option>
			<option value="150">大</option>
		</select>
		<button class="remove-bottom"> 移除 </button>
	</div>
</div>

</body>


<script type="text/javascript">
var appId='1514218208899524';
var authToken;
window.fbAsyncInit = function() {
  FB.init({
    appId      : appId,
    xfbml      : true,
    version    : 'v2.5'
  });

};

function checklogin()
{
	FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        // the user is logged in and has authenticated your
        // app, and response.authResponse supplies
        // the user's ID, a valid access token, a signed
        // request, and the time the access token 
        // and signed request each expire
        var uid = response.authResponse.userID;
        var accessToken = response.authResponse.accessToken;
        authToken = accessToken;
        console.log('success');
        $('.fb-login-button').remove();
        $('.auth').removeClass("auth");

      } else if (response.status === 'not_authorized') {
        // the user is logged in to Facebook, 
        // but has not authenticated your app
      } else {
        // the user isn't logged in to Facebook.
        FB.login(function(response) {
		    if (response.authResponse) {
		    	//checklogin();
		    	authToken = response.authResponse.accessToken;
		    	console.log('login success');
		    	$('.fb-login-button').remove();
		    	$('.auth').removeClass("auth");
		    } else {

		    }
		   },{
			    scope: 'publish_actions', 
			    return_scopes: true
			});
      }
     });
}

	(function(d, s, id){
	     var js, fjs = d.getElementsByTagName(s)[0];
	     if (d.getElementById(id)) {return;}
	     js = d.createElement(s); js.id = id;
	     js.src = "//connect.facebook.net/en_US/sdk.js";
	     fjs.parentNode.insertBefore(js, fjs);
	   }(document, 'script', 'facebook-jssdk'));
	</script>

	

</html>
